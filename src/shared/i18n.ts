import { AppLanguage } from '../stores/uiStore'

const en = {
  paneExplorerTitle: 'Explorer',
  paneOutlineTitle: 'Outline',
  paneTimelineTitle: 'Timeline',
  toggleToChinese: 'Switch to Chinese',
  toggleToEnglish: 'Switch to English',
  sidebarManageProjects: 'Manage projects',
  sidebarNewProject: 'New project',
  sidebarNewStructure: 'New group',
  sidebarNewChapter: 'New chapter',
  sidebarDeleteProject: 'Delete project',
  sidebarTimelineButton: 'History',
  sidebarNoProjects: 'No projects yet. Click “New Project” to start writing.',
  sidebarOutlineEmpty: 'No outline available yet.',
  sidebarOutlineProjectLabel: 'Project Description',
  sidebarOutlineStructureLabel: 'Structure Summary',
  sidebarOutlineChapterLabel: 'Chapter Outline',
  sidebarOutlineProjectPlaceholder: 'No description yet. Use Project Manager to add context.',
  sidebarOutlineStructurePlaceholder: 'No summary yet. Add it from the editor.',
  sidebarOutlineChapterPlaceholder: 'No outline yet. Select a chapter and add notes in the editor.',
  sidebarTimelineEmpty: 'No history available. Save a chapter to create snapshots.',
  sidebarTimelineOpenAll: 'Open full history',
  placeholderProjectName: 'Enter project name',
  placeholderStructureName: 'Enter group name',
  placeholderChapterTitle: 'Enter chapter title',
  actionSave: 'Save',
  actionCancel: 'Cancel',
  actionClose: 'Close',
  actionDelete: 'Delete',
  actionCreate: 'Create',
  actionRename: 'Rename',
  actionEdit: 'Edit',
  actionSetActive: 'Set active',
  actionDeleteVersion: 'Delete version',
  actionRestoreEditor: 'Restore to editor',
  actionOpenHistory: 'History',
  actionFocusMode: 'Focus mode',
  actionMarkTodo: 'Mark TODO',
  actionExportSnippet: 'Export snippet',
  editorProjectPlaceholder: 'No project selected',
  editorChapterPlaceholder: 'Select a chapter to start writing',
  editorTextareaPlaceholder: 'Start writing the next scene...',
  editorNoProjectDescription: 'No description yet. Use Project Manager to add details.',
  editorNoSummary: 'No summary yet. Add it from the editor panel.',
  editorAutosaveActive: 'Autosave',
  editorAutosaveReady: 'Autosave · Select a chapter to begin',
  editorAutosaveSaving: 'Autosaving...',
  labelPace: 'Pace',
  labelMood: 'Mood',
  labelSummary: 'Summary',
  timelineTitle: 'Timeline',
  timelineSubtitle: 'History',
  timelineLoading: 'Loading history...',
  timelineEmpty: 'No snapshots yet. Save a chapter to create history.',
  timelinePreviewLoading: 'Loading snapshot...',
  timelinePreviewPlaceholder: 'Select an entry to preview or restore.',
  timelineEmptyContent: '(empty)',
  timelineConfirmDelete: 'Confirm deletion',
  timelineConfirmDeleteNote: 'This action cannot be undone.',
  timelineDeleting: 'Deleting…',
  timelineWordsSuffix: 'words',
  insightsCurrentProject: 'Current Project',
  insightsNoDescription: 'No description yet. Use Project Manager to add details.',
  insightsTotalWords: 'Words',
  insightsCharacters: 'Characters',
  insightsIdeasTitle: 'Ideas & Tasks',
  insightsIdeasAll: 'All',
  insightsIdeasEmpty: 'No notes yet, start by adding a reminder.',
  insightsProgressTitle: 'Progress',
  insightsProgressOverall: 'Overall',
  projectManagerTitle: 'Project Manager',
  projectManagerHeading: 'Project Dashboard',
  projectManagerClose: 'Close',
  projectManagerSearchPlaceholder: 'Search by title or description',
  projectManagerSortLabel: 'Sort',
  projectManagerSortManual: 'Manual order',
  projectManagerSortUpdated: 'Recently updated',
  projectManagerSortCreated: 'Creation time',
  projectManagerSortTitle: 'Title (A-Z)',
  projectManagerNewProjectPlaceholder: 'New project title',
  projectManagerNewDescriptionPlaceholder: 'Optional: add a description',
  projectManagerCreate: 'Create',
  projectManagerCreateHint:
    'Default order follows creation time. Dragging works only in manual mode without filters.',
  projectManagerNoProjects: 'No projects yet. Use the form above to start a new story.',
  projectManagerNoMatches: 'No projects match your search.',
  projectManagerCreatedLabel: 'Created',
  projectManagerUpdatedLabel: 'Last updated',
  projectManagerNoChapters: 'No chapters yet',
  projectManagerNoUpdates: '--',
  projectManagerActiveBadge: 'Active',
  projectManagerSetActive: 'Set active',
  projectManagerEditDescription: 'Edit description',
  projectManagerRename: 'Rename',
  projectManagerDelete: 'Delete',
  projectManagerDescriptionEmpty: 'No description yet. Click “Edit description” to add one.',
  projectManagerStatsWords: 'Words',
  projectManagerStatsCharacters: 'Characters',
  projectManagerStatsChapters: 'Chapters',
  projectManagerStatsProgress: 'Progress',
  projectManagerDeleteTitle: 'Confirm delete',
  projectManagerDeleteActiveWarning:
    'This is the active project. Deleting it will switch to another project. This cannot be undone.',
  projectManagerDeleteWarning: 'This action cannot be undone. Make sure you have backups.',
  projectManagerDeleteInProgress: 'Deleting…',
  projectManagerSaveTitle: 'Save',
  projectManagerSaveDescription: 'Save description',
  projectManagerCancel: 'Cancel',
  sidebarOpenButton: 'Open sidebar',
  sidebarCloseButton: 'Close sidebar',
  sidebarExpandButton: 'Expand sidebar'
} as const

const zh: typeof en = {
  paneExplorerTitle: '资源管理器',
  paneOutlineTitle: '大纲',
  paneTimelineTitle: '时间线',
  toggleToChinese: '切换到中文',
  toggleToEnglish: '切换到英文',
  sidebarManageProjects: '管理作品',
  sidebarNewProject: '新建作品',
  sidebarNewStructure: '新建结构',
  sidebarNewChapter: '新建章节',
  sidebarDeleteProject: '删除当前作品',
  sidebarTimelineButton: '历史版本',
  sidebarNoProjects: '暂无作品，点击“新建作品”开始创作。',
  sidebarOutlineEmpty: '暂无可用的大纲内容。',
  sidebarOutlineProjectLabel: '作品简介',
  sidebarOutlineStructureLabel: '结构摘要',
  sidebarOutlineChapterLabel: '章节大纲',
  sidebarOutlineProjectPlaceholder: '暂无简介，使用项目管理为作品添加描述。',
  sidebarOutlineStructurePlaceholder: '暂无摘要，稍后在编辑区添加。',
  sidebarOutlineChapterPlaceholder: '暂无大纲，点击章节后在编辑区添加摘要。',
  sidebarTimelineEmpty: '暂无历史版本，保存章节后将自动生成快照。',
  sidebarTimelineOpenAll: '打开全部历史版本',
  placeholderProjectName: '输入作品名称',
  placeholderStructureName: '输入结构名称',
  placeholderChapterTitle: '输入章节标题',
  actionSave: '保存',
  actionCancel: '取消',
  actionClose: '关闭',
  actionDelete: '删除',
  actionCreate: '创建',
  actionRename: '重命名',
  actionEdit: '编辑',
  actionSetActive: '设为当前',
  actionDeleteVersion: '删除版本',
  actionRestoreEditor: '恢复到编辑器',
  actionOpenHistory: '历史版本',
  actionFocusMode: '专注模式',
  actionMarkTodo: '标记 TODO',
  actionExportSnippet: '导出片段',
  editorProjectPlaceholder: '未选择项目',
  editorChapterPlaceholder: '选择一个章节开始写作',
  editorTextareaPlaceholder: '开始写下一个场景...',
  editorNoProjectDescription: '暂无简介，使用项目管理为作品添加描述。',
  editorNoSummary: '暂无摘要，选择章节后在编辑区添加。',
  editorAutosaveActive: '自动保存',
  editorAutosaveReady: '自动保存 · 选择章节后开始',
  editorAutosaveSaving: '自动保存中...',
  labelPace: '节奏',
  labelMood: '氛围',
  labelSummary: '摘要',
  timelineTitle: '时间线',
  timelineSubtitle: '历史版本',
  timelineLoading: '加载历史版本中...',
  timelineEmpty: '暂无历史版本，保存章节后将生成快照。',
  timelinePreviewLoading: '读取版本中...',
  timelinePreviewPlaceholder: '选择左侧版本查看内容，或恢复至编辑器。',
  timelineEmptyContent: '（空内容）',
  timelineConfirmDelete: '确认删除',
  timelineConfirmDeleteNote: '此操作不可撤销，将彻底移除该历史版本。',
  timelineDeleting: '删除中...',
  timelineWordsSuffix: '字',
  insightsCurrentProject: '当前项目',
  insightsNoDescription: '暂无简介，使用项目管理为作品添加描述。',
  insightsTotalWords: '总字数',
  insightsCharacters: '角色卡',
  insightsIdeasTitle: '灵感与任务',
  insightsIdeasAll: '全部',
  insightsIdeasEmpty: '暂时没有灵感记录，开始添加一条备忘吧。',
  insightsProgressTitle: '进度',
  insightsProgressOverall: '总体',
  projectManagerTitle: '项目管理',
  projectManagerHeading: '作品仪表盘',
  projectManagerClose: '关闭',
  projectManagerSearchPlaceholder: '搜索标题或简介',
  projectManagerSortLabel: '排序',
  projectManagerSortManual: '自定义顺序',
  projectManagerSortUpdated: '最近更新',
  projectManagerSortCreated: '创建时间',
  projectManagerSortTitle: '标题',
  projectManagerNewProjectPlaceholder: '新作品标题',
  projectManagerNewDescriptionPlaceholder: '可选：添加简介，用于检索、提示创作方向',
  projectManagerCreate: '创建',
  projectManagerCreateHint: '基础排序遵循创建时间。拖拽仅在“自定义顺序”且无搜索时可用，其他排序仅改变当前视图，方便快速筛查。',
  projectManagerNoProjects: '还没有作品，填写上方表单开始新故事吧。',
  projectManagerNoMatches: '未找到符合搜索条件的作品。',
  projectManagerCreatedLabel: '创建',
  projectManagerUpdatedLabel: '最近更新',
  projectManagerNoChapters: '暂无章节',
  projectManagerNoUpdates: '--',
  projectManagerActiveBadge: '当前作品',
  projectManagerSetActive: '设为当前',
  projectManagerEditDescription: '编辑简介',
  projectManagerRename: '重命名',
  projectManagerDelete: '删除',
  projectManagerDescriptionEmpty: '暂无简介，点击“编辑简介”来添加内容。',
  projectManagerStatsWords: '字数',
  projectManagerStatsCharacters: '角色卡',
  projectManagerStatsChapters: '章节',
  projectManagerStatsProgress: '进度',
  projectManagerDeleteTitle: '确认删除',
  projectManagerDeleteActiveWarning: '这是当前激活的作品，删除后系统会自动切换至其他作品。该操作不可恢复，请确保已备份。',
  projectManagerDeleteWarning: '该操作不可恢复，请确保您已备份所需内容。',
  projectManagerDeleteInProgress: '删除中...',
  projectManagerSaveTitle: '保存',
  projectManagerSaveDescription: '保存简介',
  projectManagerCancel: '取消',
  sidebarOpenButton: '打开侧边栏',
  sidebarCloseButton: '关闭侧边栏',
  sidebarExpandButton: '展开侧栏'
} as const

export type TranslationKey = keyof typeof en

const messages: Record<AppLanguage, Record<TranslationKey, string>> = {
  en,
  zh
}

export const t = (language: AppLanguage, key: TranslationKey) => {
  const langMap = messages[language] ?? messages.zh
  return langMap[key] ?? messages.en[key] ?? key
}

export const formatWordLabel = (language: AppLanguage, value: number) =>
  language === 'zh' ? `${value.toLocaleString()} 字` : `${value.toLocaleString()} words`

export const formatChapterLabel = (language: AppLanguage, value: number) =>
  language === 'zh' ? `${value.toLocaleString()} 章节` : `${value.toLocaleString()} chapters`

export const formatEmptyContent = (language: AppLanguage) =>
  language === 'zh' ? '（空内容）' : '(empty)'

export const formatConfirmDeleteProject = (language: AppLanguage, title: string) =>
  language === 'zh'
    ? `确认删除作品「${title}」？该操作不可撤销。`
    : `Delete project "${title}"? This action cannot be undone.`

export const formatConfirmDeleteChapter = (language: AppLanguage, title: string) =>
  language === 'zh'
    ? `确认删除「${title}」及其子节点？该操作不可撤销。`
    : `Delete "${title}" and all child nodes? This action cannot be undone.`

export const formatPromptStructure = (language: AppLanguage, kind: 'group' | 'chapter') =>
  language === 'zh'
    ? kind === 'group'
      ? '输入结构名称'
      : '输入新章节标题'
    : kind === 'group'
    ? 'Enter group name'
    : 'Enter new chapter title'
